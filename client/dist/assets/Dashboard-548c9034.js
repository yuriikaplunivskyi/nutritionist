import{r as m,j as e,_ as v,a as f,L as x,b as C}from"./index-9c5893c5.js";import{a as g}from"./axios-d16e7a2c.js";import{u as b}from"./useServiceData-5295cbd2.js";import{A as w}from"./Accordions-37abe997.js";import N from"./UpdateService-f3e0a35d.js";const S=()=>{const o={title:"",descr:"",path:"",passing:[],prices:[],warnings:[],icon:""},[s,d]=m.useState(o),r=l=>{const{name:t,value:a}=l.target;d(c=>({...c,[t]:a}))},h=(l,t,a,c)=>{const u=[...s[c]];u[l][t]=a,d({...s,[c]:u})},i=(l,t)=>{d({...s,[l]:[...s[l],t]})},n=(l,t)=>{const a=[...s[t]];a.splice(l,1),d({...s,[t]:a})},p=async l=>{l.preventDefault();try{await g.post(`${window.location.origin}/api/services`,s),d(o)}catch(t){console.log(t)}};return e.jsx("div",{className:"formAddServices",children:e.jsxs("div",{className:"container",children:[e.jsx("h6",{children:"Додай нову послугу"}),e.jsx("input",{type:"text",name:"title",value:s.title,onChange:r,placeholder:"Назва послуги"}),e.jsx("textarea",{cols:"30",rows:"10",value:s.descr,name:"descr",onChange:r,placeholder:"Опис послуги"}),e.jsx("input",{type:"text",name:"path",value:s.path,onChange:r,placeholder:"Шлях до послуги"}),e.jsxs("div",{children:[e.jsx("h6",{children:"Passing"}),s.passing.map((l,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l.stage,onChange:a=>h(t,"stage",a.target.value,"passing"),placeholder:`Passing ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>n(t,"passing"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>i("passing",{stage:"",id:s.passing.length+1}),children:"Додати Passing"})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Prices"}),s.prices.map((l,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l.price,onChange:a=>h(t,"price",a.target.value,"prices"),placeholder:`Prices ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>n(t,"prices"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>i("prices",{price:"",id:s.prices.length+1}),children:"Додати Prices"})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Warnings"}),s.warnings.map((l,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l.title,onChange:a=>h(t,"title",a.target.value,"warnings"),placeholder:`Title ${t+1}`}),e.jsx("input",{type:"text",value:l.content,onChange:a=>h(t,"content",a.target.value,"warnings"),placeholder:`Content ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>n(t,"warnings"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>i("warnings",{title:"",content:"",id:s.warnings.length+1}),children:"Додати Warnings"})]}),e.jsx("button",{className:"formAddServices-send btn",onClick:p,children:"Відправити на сервер"})]})})};const y=()=>{const{serviceData:o}=b(),[s,d]=m.useState(null),r=async i=>{try{console.log(i),await g.delete(`${window.location.origin}/api/services/${i}`),window.location.reload()}catch(n){console.log("What the error",n)}},h=i=>{d(i)};return e.jsx(e.Fragment,{children:s?e.jsx(N,{serviceId:s,setSelectedServiceId:d}):o.map(i=>e.jsxs("div",{className:"serviceAdmin",children:[e.jsxs("div",{className:"service-container",children:[e.jsxs("div",{className:"service-textContainer",children:[e.jsx("h2",{className:"service-title",children:i.title}),e.jsx("p",{className:"service-text",children:i.descr}),e.jsxs("ol",{children:[e.jsx("span",{children:"Як проходить"}),i.passing.map(n=>e.jsx("li",{children:n.stage},n.id))]}),e.jsxs("ul",{children:[e.jsx("span",{className:"service-price-title",children:" Вартість: "}),i.prices.map(n=>e.jsx("li",{className:"service-price",children:n.price},n.id))]})]}),e.jsx(w,{data:i.warnings}),e.jsx("span",{children:i.path})]}),e.jsxs("div",{className:"serviceAdmin-btnWrapper",children:[e.jsx("button",{className:"serviceAdmin-delete btn",onClick:()=>r(i.id),children:"Видалити"}),e.jsx("button",{className:"serviceAdmin-change btn",onClick:()=>h(i.id),children:"Змінити"})]})]},i.id))})};const A=()=>{const o={school:"",title:"",img_path:""},[s,d]=m.useState(null),[r,h]=m.useState(o),i=t=>{const{name:a,value:c}=t.target;h(u=>({...u,[a]:c}))},n=t=>{const a=t.target.files[0];d(a)},p=t=>{t.preventDefault();const a=t.dataTransfer.files[0];d(a)},l=async t=>{t.preventDefault();try{const a=new FormData;a.append("certificateImage",s),a.append("school",r.school),a.append("title",r.title);const c=await g.post(`${window.location.origin}/uploadCertificate`,a,{headers:{"Content-Type":"multipart/form-data"}});h(u=>({...u,img_path:c.data.file})),console.log(c.data),h(o),d(new File([],""))}catch(a){console.error("Error uploading certificate:",a)}};return e.jsx("div",{className:"addCertificateForm",children:e.jsxs("div",{className:"container",children:[e.jsx("h6",{children:"Додати сертифікат"}),e.jsxs("form",{onSubmit:l,children:[e.jsx("label",{children:"Організація/школа:"}),e.jsx("input",{type:"text",name:"school",value:r.school,onChange:i,required:!0}),e.jsx("label",{children:"Назва програми:"}),e.jsx("input",{type:"text",name:"title",value:r.title,onChange:i,required:!0}),e.jsxs("div",{className:"addCertificateForm__wrapper",children:[e.jsx("label",{children:"Перетягни чи вибери зображення сертифіката"}),e.jsx("input",{className:"addCertificateForm__inputFile",type:"file",onChange:n,onDrop:p,accept:"image/*"})]}),e.jsx("button",{className:"btn btn-add",type:"submit",children:"Відпраити дані"})]}),r.img_path&&e.jsx("img",{src:r.img_path,alt:"Certificate Preview"})]})})};const _=({certificateId:o,setSelectedCertificateId:s})=>{const d={title:"",school:"",img_path:""},[r,h]=m.useState(d),[i,n]=m.useState(null),p=a=>{const{name:c,value:u}=a.target;h(j=>({...j,[c]:u}))},l=a=>{const c=a.target.files[0];n(c)};m.useEffect(()=>{(async()=>{try{const c=await g.get(`${window.location.origin}/api/certificates/${o}`);h(c.data)}catch(c){c.response&&c.response.status===404?console.log(`Certificate with ID ${o} not found`):console.error("Error fetching certificate:",c)}})()},[o]);const t=async a=>{a.preventDefault();try{const c=new FormData;c.append("school",r.school),c.append("title",r.title),i&&c.append("certificateImage",i),await g.put(`http://localhost:8800/certificates/${o}`,c,{headers:{"Content-Type":"multipart/form-data"}}),s(null),h(d)}catch(c){console.log(c)}};return e.jsxs("form",{className:"updateCerfForm",onSubmit:t,children:[e.jsx("h6",{children:"Змінити сертифікат"}),e.jsx("input",{type:"text",name:"title",value:r.title,onChange:p,placeholder:"Назва сертифіката"}),e.jsx("input",{type:"text",name:"school",value:r.school,onChange:p,placeholder:"Назва школи"}),e.jsx("input",{type:"file",name:"img_path",accept:"image/*",onChange:l}),e.jsx("img",{src:`http://localhost:8800/public/${r.img_path}`,alt:"Certificate Preview",style:{maxWidth:"300px",maxHeight:"200px"}}),e.jsx("button",{className:"send btn",children:"Внести зміни"})]})},F=()=>{const[o,s]=m.useState(""),[d,r]=m.useState(null);m.useEffect(()=>{(async()=>{try{const p=await g.get(`${window.location.origin}/api/certificates`);s(p.data)}catch(p){console.log(p),console.error("Error fetching certificate data:",p),s("")}})()},[]);const h=async n=>{try{console.log(n),await g.delete(`http://localhost:8800/certificates/${n}`),window.location.reload()}catch(p){console.log("What the error",p)}},i=n=>{r(n)};return e.jsx(e.Fragment,{children:d?e.jsx(_,{certificateId:d,setSelectedCertificateId:r}):Array.isArray(o)&&o.map(n=>e.jsxs("div",{className:"certificate",children:[e.jsxs("div",{className:"certificate__content",children:[e.jsx("h5",{children:n.title}),e.jsx("span",{children:n.school}),e.jsx("img",{src:`http://localhost:8800/public/${n.img_path}`,alt:n.img_path})]}),e.jsxs("div",{className:"certificate__btns",children:[e.jsx("button",{className:"certificate-delete btn",onClick:()=>h(n.id),children:"Видалити"}),e.jsx("button",{className:"certificate-change btn",onClick:()=>i(n.id),children:"Змінити"})]})]},n.id))})},D=m.lazy(()=>v(()=>import("./Navbar-e330feb5.js"),["./Navbar-e330feb5.js","./index-9c5893c5.js","./index-59da6e9c.css","./motion-8af8fd2d.js","./Navbar-32d2ba6e.css"],import.meta.url)),T=()=>{const[o,s]=m.useState("");return e.jsx("div",{className:"dashboard",children:e.jsxs(m.Suspense,{fallback:e.jsx("div",{className:"loader-container",children:e.jsx(f,{})}),children:[e.jsx(D,{}),e.jsxs("div",{className:"dashboard_nav",children:[e.jsx(x,{className:"btn",to:"/",children:"Повернутися на головну"}),e.jsx(x,{className:"btn",to:"/admin/reset",children:"Скидування паролю"}),e.jsx(x,{className:"btn",to:"/admin/signup",children:"Зареєструватися"}),e.jsx("button",{className:"btn",onClick:C.logout,children:"Вийти з аккаунту"})]}),e.jsxs("div",{className:"dashboard__window",children:[e.jsxs("div",{className:"dashboard_tabs",children:[e.jsx("button",{className:"btn",onClick:()=>s("changeServices"),children:"Змінити доступні послуги"}),e.jsx("button",{className:"btn",onClick:()=>s("addServices"),children:"Додати нову послугу"}),e.jsx("button",{className:"btn",onClick:()=>s("changeCertificate"),children:"Змінити доступні сертифікати"}),e.jsx("button",{className:"btn",onClick:()=>s("addCertificate"),children:"Додати новий сертифікат"})]}),e.jsxs("div",{className:"dashboard__content",children:[o==="changeServices"&&e.jsx(y,{}),o==="changeCertificate"&&e.jsx(F,{}),o==="addServices"&&e.jsx(S,{}),o==="addCertificate"&&e.jsx(A,{})]})]})]})})};export{D as LazyNavbar,T as default};
