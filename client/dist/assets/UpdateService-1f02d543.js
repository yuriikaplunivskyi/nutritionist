import{r as u,j as s,L as m}from"./index-8291e4f3.js";import{a as j}from"./axios-d16e7a2c.js";const w=({serviceId:l,setSelectedServiceId:x})=>{const h={title:"",descr:"",path:"",passing:[],prices:[],warnings:[],icon:""},[a,c]=u.useState(h),o=t=>{const{name:e,value:n}=t.target;c(r=>({...r,[e]:n}))},i=(t,e,n,r)=>{const g=[...a[r]];g[t][e]=n,c({...a,[r]:g})},d=(t,e)=>{c({...a,[t]:[...a[t],e]})},p=(t,e)=>{const n=[...a[e]];n.splice(t,1),c({...a,[e]:n})};u.useEffect(()=>{(async()=>{try{const e=await j.get(`.location.origin}/api/services/${l}`);console.log(e.data);const n={...e.data,passing:JSON.parse(e.data.passing),prices:JSON.parse(e.data.prices),warnings:JSON.parse(e.data.warnings)};c(n)}catch(e){console.log(e)}})()},[l]);const v=async t=>{t.preventDefault();try{await j.put(`.location.origin}/api/services/${l}`,a),c(h),x(null)}catch(e){console.log(e)}};return s.jsxs("div",{className:"updateForm",children:[s.jsxs("div",{className:"container",children:[s.jsx("h6",{children:"Змінити послугу"}),s.jsx("input",{type:"text",name:"title",value:a.title,onChange:o,placeholder:"Назва послуги"}),s.jsx("textarea",{cols:"30",rows:"10",value:a.descr,name:"descr",onChange:o,placeholder:"Опис послуги"}),s.jsx("input",{type:"text",name:"path",value:a.path,onChange:o,placeholder:"Шлях до послуги"}),s.jsxs("div",{children:[s.jsx("h6",{children:"Passing"}),a.passing.map((t,e)=>s.jsxs("div",{children:[s.jsx("input",{type:"text",value:t.stage,onChange:n=>i(e,"stage",n.target.value,"passing"),placeholder:`Passing ${e+1}`}),s.jsx("button",{className:"delete btn",onClick:()=>p(e,"passing"),children:"Видалити"})]},t.id)),s.jsx("button",{className:"add btn",onClick:()=>d("passing",{stage:"",id:a.passing.length+1}),children:"Додати Passing"})]}),s.jsxs("div",{children:[s.jsx("h6",{children:"Prices"}),a.prices.map((t,e)=>s.jsxs("div",{children:[s.jsx("input",{type:"text",value:t.price,onChange:n=>i(e,"price",n.target.value,"prices"),placeholder:`Prices ${e+1}`}),s.jsx("button",{className:"delete btn",onClick:()=>p(e,"prices"),children:"Видалити"})]},e)),s.jsx("button",{className:"add btn",onClick:()=>d("prices",{price:"",id:a.prices.length+1}),children:"Додати Prices"})]}),s.jsxs("div",{children:[s.jsx("h6",{children:"Warnings"}),a.warnings.map((t,e)=>s.jsxs("div",{children:[s.jsx("input",{type:"text",value:t.title,onChange:n=>i(e,"title",n.target.value,"warnings"),placeholder:`Title ${e+1}`}),s.jsx("input",{type:"text",value:t.content,onChange:n=>i(e,"content",n.target.value,"warnings"),placeholder:`Content ${e+1}`}),s.jsx("button",{className:"delete btn",onClick:()=>p(e,"warnings"),children:"Видалити"})]},e)),s.jsx("button",{className:"add btn",onClick:()=>d("warnings",{title:"",content:"",id:a.warnings.length+1}),children:"Додати Warnings"})]}),s.jsx("button",{className:"send btn",onClick:v,children:"Внести зміни"})]}),s.jsx(m,{className:"btn",to:"/admin/dashboard",children:"Повернутися "})]})};export{w as default};
