import{r as g,j as t,L as m}from"./index-36bce57e.js";import{a as j}from"./axios-d16e7a2c.js";const k=({serviceId:l,setSelectedServiceId:v})=>{const h={title:"",descr:"",path:"",passing:[],prices:[],warnings:[],icon:""},[s,r]=g.useState(h),o=a=>{const{name:e,value:n}=a.target;r(i=>({...i,[e]:n}))},c=(a,e,n,i)=>{const u=[...s[i]];u[a][e]=n,r({...s,[i]:u})},p=(a,e)=>{r({...s,[a]:[...s[a],e]})},d=(a,e)=>{const n=[...s[e]];n.splice(a,1),r({...s,[e]:n})};g.useEffect(()=>{(async()=>{try{const e=await j.get(`https://kateryna-kaplunivska.com.ua/api/services/${l}`);console.log(e.data);const n={...e.data,passing:JSON.parse(e.data.passing),prices:JSON.parse(e.data.prices),warnings:JSON.parse(e.data.warnings)};r(n)}catch(e){console.log(e)}})()},[l]);const x=async a=>{a.preventDefault();try{await j.put(`https://kateryna-kaplunivska.com.ua/api/services/${l}`,s),r(h),v(null)}catch(e){console.log(e)}};return t.jsxs("div",{className:"updateForm",children:[t.jsxs("div",{className:"container",children:[t.jsx("h6",{children:"Змінити послугу"}),t.jsx("input",{type:"text",name:"title",value:s.title,required:!0,onChange:o,placeholder:"Назва послуги"}),t.jsx("textarea",{cols:"30",rows:"10",value:s.descr,required:!0,name:"descr",onChange:o,placeholder:"Опис послуги"}),t.jsx("input",{type:"text",name:"path",value:s.path,required:!0,onChange:o,placeholder:"Шлях до послуги"}),t.jsxs("div",{children:[t.jsx("h6",{children:"Passing"}),s.passing.map((a,e)=>t.jsxs("div",{children:[t.jsx("input",{type:"text",value:a.stage,onChange:n=>c(e,"stage",n.target.value,"passing"),placeholder:`Passing ${e+1}`}),t.jsx("button",{className:"delete btn",onClick:()=>d(e,"passing"),children:"Видалити"})]},a.id)),t.jsx("button",{className:"add btn",onClick:()=>p("passing",{stage:"",id:s.passing.length+1}),children:"Додати Passing"})]}),t.jsxs("div",{children:[t.jsx("h6",{children:"Prices"}),s.prices.map((a,e)=>t.jsxs("div",{children:[t.jsx("input",{type:"text",value:a.price,onChange:n=>c(e,"price",n.target.value,"prices"),placeholder:`Prices ${e+1}`}),t.jsx("button",{className:"delete btn",onClick:()=>d(e,"prices"),children:"Видалити"})]},e)),t.jsx("button",{className:"add btn",onClick:()=>p("prices",{price:"",id:s.prices.length+1}),children:"Додати Prices"})]}),t.jsxs("div",{children:[t.jsx("h6",{children:"Warnings"}),s.warnings.map((a,e)=>t.jsxs("div",{children:[t.jsx("input",{type:"text",value:a.title,onChange:n=>c(e,"title",n.target.value,"warnings"),placeholder:`Title ${e+1}`}),t.jsx("input",{type:"text",value:a.content,onChange:n=>c(e,"content",n.target.value,"warnings"),placeholder:`Content ${e+1}`}),t.jsx("button",{className:"delete btn",onClick:()=>d(e,"warnings"),children:"Видалити"})]},e)),t.jsx("button",{className:"add btn",onClick:()=>p("warnings",{title:"",content:"",id:s.warnings.length+1}),children:"Додати Warnings"})]}),t.jsx("button",{className:"send btn",onClick:x,children:"Внести зміни"})]}),t.jsx(m,{className:"btn",to:"/admin/dashboard",children:"Повернутися "})]})};export{k as default};
