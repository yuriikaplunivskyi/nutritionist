import{r as p,j as e,_ as v,a as f,L as x,b as C}from"./index-aff533f7.js";import{a as g}from"./axios-d16e7a2c.js";import{u as b}from"./useServiceData-4b344139.js";import{A as S}from"./Accordions-c8a5d510.js";import N from"./UpdateService-fbd937e6.js";const w=()=>{const r={title:"",descr:"",path:"",passing:[],prices:[],warnings:[],icon:""},[n,o]=p.useState(r),l=a=>{const{name:t,value:s}=a.target;o(i=>({...i,[t]:s}))},h=(a,t,s,i)=>{const u=[...n[i]];u[a][t]=s,o({...n,[i]:u})},m=(a,t)=>{o({...n,[a]:[...n[a],t]})},c=(a,t)=>{const s=[...n[t]];s.splice(a,1),o({...n,[t]:s})},d=async a=>{a.preventDefault();try{await g.post(`${window.location.origin}/api/services`,n),o(r)}catch(t){console.log(t)}};return e.jsx("div",{className:"formAddServices",children:e.jsxs("div",{className:"container",children:[e.jsx("h6",{children:"Додай нову послугу"}),e.jsx("input",{type:"text",name:"title",value:n.title,onChange:l,placeholder:"Назва послуги"}),e.jsx("textarea",{cols:"30",rows:"10",value:n.descr,name:"descr",onChange:l,placeholder:"Опис послуги"}),e.jsx("input",{type:"text",name:"path",value:n.path,onChange:l,placeholder:"Шлях до послуги"}),e.jsxs("div",{children:[e.jsx("h6",{children:"Passing"}),n.passing.map((a,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.stage,onChange:s=>h(t,"stage",s.target.value,"passing"),placeholder:`Passing ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>c(t,"passing"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>m("passing",{stage:"",id:n.passing.length+1}),children:"Додати Passing"})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Prices"}),n.prices.map((a,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.price,onChange:s=>h(t,"price",s.target.value,"prices"),placeholder:`Prices ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>c(t,"prices"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>m("prices",{price:"",id:n.prices.length+1}),children:"Додати Prices"})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Warnings"}),n.warnings.map((a,t)=>e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.title,onChange:s=>h(t,"title",s.target.value,"warnings"),placeholder:`Title ${t+1}`}),e.jsx("input",{type:"text",value:a.content,onChange:s=>h(t,"content",s.target.value,"warnings"),placeholder:`Content ${t+1}`}),e.jsx("button",{className:"formAddServices-delete btn",onClick:()=>c(t,"warnings"),children:"Видалити"})]},t)),e.jsx("button",{className:"formAddServices-add btn",onClick:()=>m("warnings",{title:"",content:"",id:n.warnings.length+1}),children:"Додати Warnings"})]}),e.jsx("button",{className:"formAddServices-send btn",onClick:d,children:"Відправити на сервер"})]})})};const y=()=>{const{serviceData:r,setServiceData:n}=b(),[o,l]=p.useState(null),[h,m]=p.useState(r);p.useEffect(()=>{m(r)},[r]);const c=async a=>{try{console.log(a),await g.delete(`${window.location.origin}/api/services/${a}`),m(t=>t.filter(s=>s.id!==a))}catch(t){console.log("What the error",t)}},d=a=>{l(a)};return e.jsx(e.Fragment,{children:o?e.jsx(N,{serviceId:o,setSelectedServiceId:l}):h.map(a=>e.jsxs("div",{className:"serviceAdmin",children:[e.jsxs("div",{className:"service-container",children:[e.jsxs("div",{className:"service-textContainer",children:[e.jsx("h2",{className:"service-title",children:a.title}),e.jsx("p",{className:"service-text",children:a.descr}),e.jsxs("ol",{children:[e.jsx("span",{children:"Як проходить"}),a.passing.map(t=>e.jsx("li",{children:t.stage},t.id))]}),e.jsxs("ul",{children:[e.jsx("span",{className:"service-price-title",children:" Вартість: "}),a.prices.map(t=>e.jsx("li",{className:"service-price",children:t.price},t.id))]})]}),e.jsx(S,{data:a.warnings}),e.jsx("span",{children:a.path})]}),e.jsxs("div",{className:"serviceAdmin-btnWrapper",children:[e.jsx("button",{className:"serviceAdmin-delete btn",onClick:()=>c(a.id),children:"Видалити"}),e.jsx("button",{className:"serviceAdmin-change btn",onClick:()=>d(a.id),children:"Змінити"})]})]},a.id))})};const A=()=>{const r={school:"",title:"",img_path:""},[n,o]=p.useState(null),[l,h]=p.useState(r),m=t=>{const{name:s,value:i}=t.target;h(u=>({...u,[s]:i}))},c=t=>{const s=t.target.files[0];o(s)},d=t=>{t.preventDefault();const s=t.dataTransfer.files[0];o(s)},a=async t=>{t.preventDefault();try{const s=new FormData;s.append("certificateImage",n),s.append("school",l.school),s.append("title",l.title);const i=await g.post(`${window.location.origin}/api/uploadCertificate`,s,{headers:{"Content-Type":"multipart/form-data"}});h(u=>({...u,img_path:i.data.file})),console.log(i.data),h(r),o(new File([],""))}catch(s){console.error("Error uploading certificate:",s)}};return e.jsx("div",{className:"addCertificateForm",children:e.jsxs("div",{className:"container",children:[e.jsx("h6",{children:"Додати сертифікат"}),e.jsxs("form",{onSubmit:a,children:[e.jsx("label",{children:"Організація/школа:"}),e.jsx("input",{type:"text",name:"school",value:l.school,onChange:m,required:!0}),e.jsx("label",{children:"Назва програми:"}),e.jsx("input",{type:"text",name:"title",value:l.title,onChange:m,required:!0}),e.jsxs("div",{className:"addCertificateForm__wrapper",children:[e.jsx("label",{children:"Перетягни чи вибери зображення сертифіката"}),e.jsx("input",{className:"addCertificateForm__inputFile",type:"file",onChange:c,onDrop:d,accept:"image/*"})]}),e.jsx("button",{className:"btn btn-add",type:"submit",children:"Відпраити дані"})]}),l.img_path&&e.jsx("img",{src:l.img_path,alt:"Certificate Preview"})]})})};const _=({certificateId:r,setSelectedCertificateId:n})=>{const o={title:"",school:"",img_path:""},[l,h]=p.useState(o),[m,c]=p.useState(null),d=s=>{const{name:i,value:u}=s.target;h(j=>({...j,[i]:u}))},a=s=>{const i=s.target.files[0];c(i)};p.useEffect(()=>{(async()=>{try{const i=await g.get(`${window.location.origin}/api/certificates/${r}`);h(i.data)}catch(i){i.response&&i.response.status===404?console.log(`Certificate with ID ${r} not found`):console.error("Error fetching certificate:",i)}})()},[r]);const t=async s=>{s.preventDefault();try{const i=new FormData;i.append("school",l.school),i.append("title",l.title),m&&i.append("certificateImage",m),await g.put(`http://localhost:8800/certificates/${r}`,i,{headers:{"Content-Type":"multipart/form-data"}}),n(null),h(o)}catch(i){console.log(i)}};return e.jsxs("form",{className:"updateCerfForm",onSubmit:t,children:[e.jsx("h6",{children:"Змінити сертифікат"}),e.jsx("input",{type:"text",name:"title",value:l.title,onChange:d,placeholder:"Назва сертифіката"}),e.jsx("input",{type:"text",name:"school",value:l.school,onChange:d,placeholder:"Назва школи"}),e.jsx("input",{type:"file",name:"img_path",accept:"image/*",onChange:a}),e.jsx("img",{src:`http://localhost:8800/public/${l.img_path}`,alt:"Certificate Preview",style:{maxWidth:"300px",maxHeight:"200px"}}),e.jsx("button",{className:"send btn",children:"Внести зміни"})]})},D=()=>{const[r,n]=p.useState(""),[o,l]=p.useState(null);p.useEffect(()=>{(async()=>{try{const d=await g.get("http://localhost:8800/certificates");n(d.data)}catch(d){console.log(d),console.error("Error fetching certificate data:",d),n("")}})()},[]);const h=async c=>{try{console.log(c),await g.delete(`${window.location.origin}/api/certificates/${c}`),n(d=>d.filter(a=>a.id!==c))}catch(d){console.log("What the error",d)}},m=c=>{l(c)};return e.jsx(e.Fragment,{children:o?e.jsx(_,{certificateId:o,setSelectedCertificateId:l}):Array.isArray(r)&&r.map(c=>e.jsxs("div",{className:"certificate",children:[e.jsxs("div",{className:"certificate__content",children:[e.jsx("h5",{children:c.title}),e.jsx("span",{children:c.school}),e.jsx("img",{src:`http://localhost:8800/public/${c.img_path}`,alt:c.img_path})]}),e.jsxs("div",{className:"certificate__btns",children:[e.jsx("button",{className:"certificate-delete btn",onClick:()=>h(c.id),children:"Видалити"}),e.jsx("button",{className:"certificate-change btn",onClick:()=>m(c.id),children:"Змінити"})]})]},c.id))})},F=p.lazy(()=>v(()=>import("./Navbar-f90aac4c.js"),["./Navbar-f90aac4c.js","./index-aff533f7.js","./index-59da6e9c.css","./motion-9eb636c1.js","./Navbar-32d2ba6e.css"],import.meta.url)),L=()=>{const[r,n]=p.useState("");return e.jsx("div",{className:"dashboard",children:e.jsxs(p.Suspense,{fallback:e.jsx("div",{className:"loader-container",children:e.jsx(f,{})}),children:[e.jsx(F,{}),e.jsxs("div",{className:"dashboard_nav",children:[e.jsx(x,{className:"btn",to:"/",children:"Повернутися на головну"}),e.jsx(x,{className:"btn",to:"/admin/reset",children:"Скидування паролю"}),e.jsx(x,{className:"btn",to:"/admin/signup",children:"Зареєструватися"}),e.jsx("button",{className:"btn",onClick:C.logout,children:"Вийти з аккаунту"})]}),e.jsxs("div",{className:"dashboard__window",children:[e.jsxs("div",{className:"dashboard_tabs",children:[e.jsx("button",{className:"btn",onClick:()=>n("changeServices"),children:"Змінити доступні послуги"}),e.jsx("button",{className:"btn",onClick:()=>n("addServices"),children:"Додати нову послугу"}),e.jsx("button",{className:"btn",onClick:()=>n("changeCertificate"),children:"Змінити доступні сертифікати"}),e.jsx("button",{className:"btn",onClick:()=>n("addCertificate"),children:"Додати новий сертифікат"})]}),e.jsxs("div",{className:"dashboard__content",children:[r==="changeServices"&&e.jsx(y,{}),r==="changeCertificate"&&e.jsx(D,{}),r==="addServices"&&e.jsx(w,{}),r==="addCertificate"&&e.jsx(A,{})]})]})]})})};export{F as LazyNavbar,L as default};
