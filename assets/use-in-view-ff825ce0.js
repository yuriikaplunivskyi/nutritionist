import{r as g}from"./index-7f029cad.js";import{r as p}from"./resolve-element-d02babe5.js";const E={some:0,all:1};function I(s,r,{root:i,margin:f,amount:t="some"}={}){const c=p(s),n=new WeakMap,u=a=>{a.forEach(e=>{const l=n.get(e.target);if(e.isIntersecting!==!!l)if(e.isIntersecting){const d=r(e);typeof d=="function"?n.set(e.target,d):o.unobserve(e.target)}else l&&(l(e),n.delete(e.target))})},o=new IntersectionObserver(u,{root:i,rootMargin:f,threshold:typeof t=="number"?t:E[t]});return c.forEach(a=>o.observe(a)),()=>o.disconnect()}function w(s,{root:r,margin:i,amount:f,once:t=!1}={}){const[c,n]=g.useState(!1);return g.useEffect(()=>{if(!s.current||t&&c)return;const u=()=>(n(!0),t?void 0:()=>n(!1)),o={root:r&&r.current||void 0,margin:i,amount:f};return I(s.current,u,o)},[r,s,i,t]),c}export{w as u};
